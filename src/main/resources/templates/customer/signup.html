<!DOCTYPE html>
<html layout:decorate="~{layouts/layout1}"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      xmlns:sec="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>공방와 :: 일반 회원 가입</title>

    <th:block layout:fragment="script">
        <script th:inline="javascript">

            $(document).ready(function (e) {

                console.log("냥")

                var errorMessage = [[${errorMessage}]];
                if (errorMessage != null) {
                    alert(errorMessage);
                }

                var result = [[${result}]];

                if (result != null) {
                    alert(result)
                }

            })

        </script>
    </th:block>


</head>
<body>

<div layout:fragment="content">

    <div class="row mt-3 mb-3">
        <form action="/customer/signup" class="forms" method="post" th:object="${customerDTO}">
            <div class="col col-md-4 offset-md-4">
            <div class="card mb-4">
                <div class="card-body">

                    <div style="text-align: center">
                        <img src="/img/user/customer.png" width="60px" style="margin-bottom: 3px">
                        <h3 >일반 회원 가입</h3>
                    </div>

                    <div class="userRole">
                        <label class="form-label" for="Role" >회원유형</label>
                        <select aria-label="Default select example" class="form-select" th:field="*{role}" id="role" name="role">
                            <option value="USER">일반회원</option>
                        </select>
                    </div>

                    <label class="form-label" for="name" >이름</label>
                    <input class="form-control" id="name" name="name" th:field="*{name}" type="text">
                    <p th:errors="*{name}" th:if="${#fields.hasErrors('name')}"></p>

                    <label class="form-label" for="email" >이메일</label>
                    <input type="text" class="form-control" id="email" name="email" th:field="*{email}"></input>
                    <p th:errors="*{email}" th:if="${#fields.hasErrors('email')}"></p>

                    <label class="form-label" for="password" >비밀번호</label>
                    <input class="form-control" id="password" name="password" th:field="*{password}" type="text">
                    <p th:errors="*{password}" th:if="${#fields.hasErrors('password')}"></p>

                    <label class="form-label" for="phone" >휴대폰번호</label>
                    <input class="form-control" id="phone" name="phone" th:field="*{phone}"
                           type="tel">
                    <p th:errors="*{phone}" th:if="${#fields.hasErrors('phone')}"></p>

                    <label class="form-label" for="nickname" >닉네임</label>
                    <input class="form-control" id="nickname" name="nickname" th:field="*{nickname}" type="text">
                    <p th:errors="*{nickname}" th:if="${#fields.hasErrors('nickname')}"></p>

                    <label class="form-label" for="birth" >생년월일</label>
                    <input class="form-control" id="birth" name="birth" th:field="*{birth}" type="date">
                    <p th:errors="*{birth}" th:if="${#fields.hasErrors('birth')}"></p>


                    <div style="text-align: center; margin-top: 15px">
                        <input class="btn btn-secondary submitBtn mb-1" type="submit" value="등록">
                    </div>


                </div>
            </div>
        </div>
        </form>
    </div>


    <script th:inline="javascript">

        let isNameValid = false;

        $("#exampleFormControlInput1").on("change", function () {
            let inputName = $(this).val();

            isNameValid = inputName.length >= 2 && inputName.length <= 10;

            if (isNameValid) {
                $(this).removeClass("is-invalid")
                $(this).addClass("is-valid")
            } else {
                $(this).removeClass("is-valid")
                $(this).addClass("is-invalid")
            }

        })

    </script>

</div>

</body>
</html>